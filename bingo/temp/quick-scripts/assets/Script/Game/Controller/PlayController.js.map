{"version":3,"sources":["PlayController.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"../../../../../../assets/Script/Game/Controller","sourcesContent":["// Learn TypeScript:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/typescript.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/typescript.html\n// Learn Attribute:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\n\nconst { ccclass, property } = cc._decorator;\n\n@ccclass\nexport default class PlayController extends cc.Component {\n    @property(cc.Prefab)\n    userManager = null;\n    user = null;\n\n    @property(cc.Label)\n    lvLabel = null;\n    @property(cc.Label)\n    scoreLabel = null;\n\n    /******* 引导 *******/\n    @property(cc.Node)\n    guideNode0 = null;\n    @property(cc.Node)\n    guideNode1 = null;\n\n    /******* mode *******/\n    @property(cc.Button)\n    modeButton = null;\n    @property(cc.Node)\n    modeNode = null;\n\n    /******* bingoItem *******/\n    @property\n    matrixRow: number = 0; //矩阵行列\n    @property\n    padding: number = 0; //和底边的距离\n    pointArr = null; //坐标矩阵\n    @property(cc.Node)\n    bingoItemNode = null;\n    @property(cc.Node)\n    bingoItemMaskNode = null;\n    @property(cc.Prefab)\n    bingoItem = null;\n    bingoItems = null;\n    answerLine = null; //连成一条线的答案\n\n\n    /******* scrollerItem *******/\n    spawningTime = 0; //产生时间间隔\n    movingTime = 0; //移动时间间隔\n    @property(cc.Node)\n    scrollerItemNode = null;\n    @property(cc.Prefab)\n    scrollerItem = null;\n\n    @property(cc.Button)\n    beginGameButton = null;\n    isBeginGame = 0; //0，初始状态；1，准备就绪；2，进行中；3，bingo\n    intervalNum = 0;\n    gameTime = 0;\n    scrollerItemCount = 0;\n    scrollerItems = null;\n\n    @property(cc.Button)\n    bingoButton = null;\n\n    @property(cc.Prefab)\n    localDataManager = null;\n    localData = null;\n    rankData = null;\n    data = null; //本地数据\n    randomCount = 0; //随机个数\n    randomData = null; //随机数据\n    randomAnswer = null; //随机填入矩阵的答案\n\n    /******* 代答 *******/\n    @property(cc.Button)\n    helpButton = null;\n    @property(cc.Label)\n    helpCountLabel = null;\n    currentHelpCount = null;\n\n    @property(cc.Node)\n    nextNode = null;\n\n    onLoad() {\n        this.scrollerItems = [];\n        this.bingoItems = [];\n        this.answerLine = [];\n        this.buildCoordinate();\n\n        this.resetGameState();\n\n        this.localData = cc.instantiate(this.localDataManager).getComponent('LocalDataManager');\n        this.localData.parseRank(this.getLvAndScroe, this);\n    }\n\n    getLvAndScroe() {\n        this.localData.parseParameter(this.getParameter, this);\n        this.rankData = this.localData.rankData;\n\n        this.user = cc.instantiate(this.userManager).getComponent('UserManager');\n        this.user.setHelpCount(\"990\");\n        if (!this.user.getIsShowGuide0()) {\n            this.guideNode0.setPosition(270, 480);\n        } else {\n            this.guideNode0.setPosition(-858, 480);\n        }\n\n        var lv = this.user.getLv();\n        var score = this.user.getScore();\n        var helpCount = this.user.getHelpCount();\n\n        var rank = this.rankData[lv];\n        var rank_arr = rank.split(',');\n        if (rank_arr.length >= 2) {\n            var s = \"\";\n            if (score < 60) {\n                s = \"学渣\";\n            } else if (60 <= score && score < 90) {\n                s = \"学霸\";\n            } else {\n                s = \"学神\";\n            }\n            this.lvLabel.string = rank_arr[1] + \"  \" + s;\n        }\n        this.scoreLabel.string = score;\n        this.helpCountLabel.string = \"X \" + helpCount;\n    }\n\n    getParameter() {\n        this.randomCount = this.localData.randomCount;\n        this.spawningTime = this.localData.spawningTime;\n        this.movingTime = this.localData.movingTime;\n\n        this.localData.parseData(this.refreshUI, this);\n    }\n\n    resetGameState() {\n        this.isBeginGame = 1;\n        this.beginGameButton.node.getChildByName(\"Label\").getComponent(cc.Label).string = \"准备就绪\";\n        this.scrollerItemCount = 0;\n        this.bingoButton.interactable = false;\n        this.modeButton.interactable = true;\n        this.helpButton.interactable = false;\n        this.gameTime = 0;\n        this.currentHelpCount = 0;\n        this.scrollerItems.forEach(scrollerItem => {\n            scrollerItem.destroy()\n        });\n        this.scrollerItems.splice(0, this.scrollerItems.length);\n        this.answerLine.splice(0, this.answerLine.length);\n        if (this.intervalNum) {\n            clearInterval(this.intervalNum)\n        }\n        this.bingoItemMaskNode.setPosition(-240, -240);\n    }\n\n    refreshUI() {\n        this.resetGameState();\n\n        this.localData.generatingData(this.randomCount, this.matrixRow);\n        this.randomData = this.localData.scrollerData;\n        this.randomAnswer = this.localData.answerData;\n\n        this.initAnswer();\n    }\n\n    initAnswer() {\n        if (this.randomAnswer.length < this.matrixRow * this.matrixRow) {\n            return;\n        }\n        if (this.bingoItems.length == this.matrixRow) {\n            var index = 0;\n            for (var i = 0; i < this.matrixRow; i++) {\n                for (var j = 0; j < this.matrixRow; j++) {\n                    var bingoItem = this.bingoItems[i][j];\n                    var bingoItemScript = bingoItem.getComponent(\"BingoItem\");\n                    var answer = this.randomAnswer[index];\n                    bingoItemScript.setAnswer(answer);\n                    index++;\n                }\n            }\n        } else {\n            var index = 0;\n            for (var i = 0; i < this.matrixRow; i++) {\n                var itemArr = [];\n                for (var j = 0; j < this.matrixRow; j++) {\n                    var bingoItem = cc.instantiate(this.bingoItem);\n                    bingoItem.setPosition(this.pointArr[i][j].x, this.pointArr[i][j].y);\n                    this.bingoItemNode.addChild(bingoItem);\n                    var bingoItemScript = bingoItem.getComponent(\"BingoItem\");\n                    var answer = this.randomAnswer[index];\n                    bingoItemScript.setAnswer(answer);\n                    bingoItemScript.contrastItems = this.scrollerItems;\n                    bingoItemScript.point = cc.v2(i, j);\n                    bingoItemScript.callback = this.bingoItemCallback.bind(this);\n                    itemArr.push(bingoItem);\n                    index++;\n                }\n                this.bingoItems.push(itemArr);\n            }\n        }\n    }\n\n    start() {\n\n    }\n\n    //创建坐标矩阵\n    buildCoordinate() {\n        var width = this.bingoItemNode.width / this.matrixRow;\n        var beginX = width / 2;\n        var beginY = this.padding + width / 2;\n\n        this.pointArr = [];\n        for (var i = 0; i < this.matrixRow; i++) {\n            var arr = [];\n            for (var j = 0; j < this.matrixRow; j++) {\n                var position = cc.v2(beginX + i * width, beginY + j * width);\n                arr.push(position);\n            }\n            this.pointArr.push(arr);\n        }\n    }\n\n    addScrollerItem() {\n        if (this.randomData.length < this.randomCount) {\n            return;\n        }\n        var scrollerItem = cc.instantiate(this.scrollerItem);\n        scrollerItem.setPosition(320, 0);\n        this.scrollerItemNode.addChild(scrollerItem);\n        var scrollerItemScript = scrollerItem.getComponent(\"ScrollerItem\");\n        var content = this.randomData[this.scrollerItemCount];\n        var movingTime_temp = this.movingTime;\n        var mode = this.user.getGameMode();\n        if (mode == \"2\") {\n            movingTime_temp /= 2;\n        }\n        scrollerItemScript.setData(content, movingTime_temp);\n        this.scrollerItemCount++;\n        this.scrollerItems.push(scrollerItem);\n        if (this.scrollerItemCount == this.randomCount && this.intervalNum) {\n            clearInterval(this.intervalNum);\n        }\n    }\n\n    beginGameAction(event) {\n        if (this.guideNode1.position.x > 0) {\n            this.guideNode1.setPosition(-1425, 480);\n        }\n        if (!this.user.getIsShowGuide1()) {\n            this.user.setIsShowGuide1(true);\n        }\n        if (this.isBeginGame == 1) { //准备就绪\n            this.bingoItemMaskNode.setPosition(-240, 526);\n            this.beginGameButton.node.getChildByName(\"Label\").getComponent(cc.Label).string = \"放弃\";\n            this.isBeginGame = 2;\n            this.modeButton.interactable = false;\n            this.addScrollerItem(); //先执行一次\n            var spawningTime_temp = this.spawningTime;\n            var mode = this.user.getGameMode();\n            if (mode == \"2\") {\n                this.helpButton.interactable = false;\n                spawningTime_temp /= 2;\n            } else {\n                this.helpButton.interactable = true;\n            }\n            this.intervalNum = setInterval(this.addScrollerItem.bind(this), 1000 * spawningTime_temp);\n        } else {\n            this.refreshUI();\n        }\n    }\n\n    bingoItemCallback(i, j) {\n        this.bingoButton.interactable = false;\n        //横排\n        for (let row = 0; row < this.matrixRow; row++) {\n            var bingoItem = this.bingoItems[row][j];\n            var bingoItemScript = bingoItem.getComponent(\"BingoItem\");\n            if (!bingoItemScript.getIsReply()) {\n                break;\n            }\n            if (row == this.matrixRow - 1) {\n                this.bingoButton.interactable = true;\n                for (let index = 0; index < this.matrixRow; index++) {\n                    var bingoItem = this.bingoItems[index][j];\n                    this.answerLine.push(bingoItem);\n                }\n                return;\n            }\n        }\n        //竖排\n        for (let column = 0; column < this.matrixRow; column++) {\n            var bingoItem = this.bingoItems[i][column];\n            var bingoItemScript = bingoItem.getComponent(\"BingoItem\");\n            if (!bingoItemScript.getIsReply()) {\n                break;\n            }\n            if (column == this.matrixRow - 1) {\n                this.bingoButton.interactable = true;\n                for (let index = 0; index < this.matrixRow; index++) {\n                    var bingoItem = this.bingoItems[i][index];\n                    this.answerLine.push(bingoItem);\n                }\n                return;\n            }\n        }\n        //低-高斜线\n        if (i == j) {\n            for (let row = 0; row < this.matrixRow; row++) {\n                var bingoItem = this.bingoItems[row][row];\n                var bingoItemScript = bingoItem.getComponent(\"BingoItem\");\n                if (!bingoItemScript.getIsReply()) {\n                    break;\n                }\n                if (row == this.matrixRow - 1) {\n                    this.bingoButton.interactable = true;\n                    for (let index = 0; index < this.matrixRow; index++) {\n                        var bingoItem = this.bingoItems[index][index];\n                        this.answerLine.push(bingoItem);\n                    }\n                    return;\n                }\n            }\n        }\n        //高-低斜线\n        if (i + j == this.matrixRow - 1) {\n            for (let row = 0; row < this.matrixRow; row++) {\n                var bingoItem = this.bingoItems[row][this.matrixRow - 1 - row];\n                var bingoItemScript = bingoItem.getComponent(\"BingoItem\");\n                if (!bingoItemScript.getIsReply()) {\n                    break;\n                }\n                if (row == this.matrixRow - 1) {\n                    this.bingoButton.interactable = true;\n                    for (let index = 0; index < this.matrixRow; index++) {\n                        var bingoItem = this.bingoItems[index][this.matrixRow - 1 - index];\n                        this.answerLine.push(bingoItem);\n                    }\n                    return;\n                }\n            }\n        }\n    }\n\n    bingoAction(event) {\n        var isAllTrue = true;\n        this.answerLine.forEach(element => {\n            var bingoItemScript = element.getComponent(\"BingoItem\");\n            if (!bingoItemScript.isTrue) {\n                isAllTrue = false;\n                bingoItemScript.setError();\n            }\n        });\n        this.nextNode.setPosition(270, 480);\n        var nextNodeScript = this.nextNode.getComponent(\"Next\");\n        nextNodeScript.setData(isAllTrue);\n\n        this.isBeginGame = 3;\n        this.beginGameButton.node.getChildByName(\"Label\").getComponent(cc.Label).string = \"准备\";\n        this.bingoButton.interactable = false;\n        this.helpButton.interactable = false;\n        if (this.intervalNum) {\n            clearInterval(this.intervalNum)\n        }\n    }\n\n    update(dt) {\n        if (this.isBeginGame == 2) {\n            this.gameTime += dt;\n            var spawningTime_temp = this.spawningTime;\n            var movingTime_temp = this.movingTime;\n            var mode = this.user.getGameMode();\n            if (mode == \"2\") {\n                spawningTime_temp /= 2;\n                movingTime_temp /= 2;\n            }\n            if (this.gameTime >= spawningTime_temp * (this.randomCount - 1) + movingTime_temp) {\n                this.bingoAction(null);\n            }\n        }\n    }\n\n    changeModeAction(event) {\n        if (this.guideNode0.position.x > 0) {\n            this.guideNode0.setPosition(-858, 480);\n        }\n        if (!this.user.getIsShowGuide0()) {\n            this.user.setIsShowGuide0(true);\n        }\n        this.modeNode.setPosition(270, 480);\n    }\n\n    helpAction(event) {\n        var helpCount = parseInt(this.user.getHelpCount());\n        if (helpCount <= 0) {\n            return;\n        }\n        helpCount--;\n        this.user.setHelpCount(helpCount);\n        this.helpCountLabel.string = \"X \" + helpCount;\n        this.currentHelpCount++;\n        var mode = this.user.getGameMode();\n        if (mode == \"0\" && this.currentHelpCount >= 5) {\n            this.helpButton.interactable = false;\n        } else if (mode == \"1\" && this.currentHelpCount >= 2) {\n            this.helpButton.interactable = false;\n        }\n    }\n}\n"]}